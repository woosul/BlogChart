<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“Š ì£¼ì‹ ì°¨íŠ¸ íŒ¨í„´ìœ¼ë¡œ ë§¤ìˆ˜/ë§¤ë„ ì‹ í˜¸ ì°¾ê¸°</title>
    <link rel="stylesheet" href="../../common/css/chart-common.css">
    <style>
        .pattern-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .pattern-btn {
            padding: 8px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 20px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .pattern-btn.active {
            border-color: #3b82f6;
            background: #eff6ff;
            color: #1d4ed8;
        }
        
        .signal-indicator {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .signal-item {
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .signal-buy {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            color: #166534;
            border: 2px solid #22c55e;
        }
        
        .signal-sell {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
            color: #991b1b;
            border: 2px solid #ef4444;
        }
        
        .signal-neutral {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            color: #475569;
            border: 2px solid #94a3b8;
        }
    </style>
</head>
<body>
    <div class="chart-container">
        <!-- í—¤ë” -->
        <div class="chart-header">
            <h1>ğŸ“Š ì°¨íŠ¸ íŒ¨í„´ ë¶„ì„</h1>
            <p>30ë§Œì›ì„ ìƒê³  ê¹¨ë‹¬ì€ ì£¼ì‹ ì°¨íŠ¸ì˜ ì§„ì‹¤</p>
        </div>

        <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="nav-bar">
            <a href="../../" class="home-link">ğŸ  í™ˆ</a>
            <a href="../">ğŸ“ˆ ì£¼ì‹ ì°¨íŠ¸ ëª©ë¡</a>
            <a href="../volume-price-correlation/">ğŸ“Š ê±°ë˜ëŸ‰ ë¶„ì„</a>
            <a href="../moving-average-signals/">ğŸ“Š ì´ë™í‰ê· ì„ </a>
        </div>

        <!-- ì»¨í…ì¸  -->
        <div class="chart-content">
            <!-- íƒ­ ë²„íŠ¼ -->
            <div class="tab-buttons">
                <button class="tab-button active" onclick="showTab('story')">
                    ğŸ“– ë‚´ ì‹¤íŒ¨ ìŠ¤í† ë¦¬
                </button>
                <button class="tab-button" onclick="showTab('basic')">
                    ğŸ“Š ê¸°ë³¸ íŒ¨í„´ ë¶„ì„
                </button>
                <button class="tab-button" onclick="showTab('advanced')">
                    ğŸ¯ ê³ ê¸‰ íŒ¨í„´ ì¸ì‹
                </button>
                <button class="tab-button" onclick="showTab('practice')">
                    ğŸ’ª ì‹¤ì „ ì—°ìŠµ
                </button>
            </div>

            <!-- ìŠ¤í† ë¦¬ íƒ­ -->
            <div id="tab-story" class="tab-content">
                <div class="chart-area">
                    <div class="chart-title">ğŸ˜­ ì‹¤íŒ¨í•œ íˆ¬ì vs ğŸ˜Š ì„±ê³µí•œ íˆ¬ì</div>
                    <div class="chart-canvas-area">
                        <canvas id="storyChart"></canvas>
                    </div>
                    
                    <div class="signal-indicator">
                        <div class="signal-item signal-sell">âŒ ì‹¤íŒ¨ í¬ì¸íŠ¸</div>
                        <div class="signal-item signal-buy">âœ… ì„±ê³µ í¬ì¸íŠ¸</div>
                    </div>
                </div>
                
                <div class="story-box failure-box" id="storyExplanation">
                    <h4>ğŸ’­ ê·¸ë•Œ ë‚´ ìƒê°</h4>
                    <p>ì°¨íŠ¸ì˜ ì ë“¤ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¤ë³´ë©´ ê° ì‹œì ì˜ ì œ ìƒê°ì„ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”!</p>
                </div>
                
                <div class="explanation">
                    <h3>ğŸ“š ì‹¤íŒ¨ì—ì„œ ë°°ìš´ í•µì‹¬ êµí›ˆ</h3>
                    <ul>
                        <li>ì´ë™í‰ê· ì„ ì„ ë¬´ì‹œí•˜ê³  ê°ì •ì ìœ¼ë¡œ íˆ¬ìí–ˆë˜ ì‹¤ìˆ˜</li>
                        <li>ê±°ë˜ëŸ‰ ê¸‰ì¦ì„ ìœ„í—˜ ì‹ í˜¸ë¡œ ì¸ì‹í•˜ì§€ ëª»í–ˆë˜ ì </li>
                        <li>ì†ì ˆ ê¸°ì¤€ ì—†ì´ "ì¢‹ì€ íšŒì‚¬ë‹ˆê¹Œ ê´œì°®ê² ì§€" í–ˆë˜ ì•ˆì¼í•¨</li>
                        <li>ì°¨íŠ¸ íŒ¨í„´ì„ ì²´ê³„ì ìœ¼ë¡œ ê³µë¶€í•œ í›„ì˜ ê·¹ì ì¸ ë³€í™”</li>
                    </ul>
                </div>
            </div>

            <!-- ê¸°ë³¸ íŒ¨í„´ íƒ­ -->
            <div id="tab-basic" class="tab-content" style="display: none;">
                <div class="chart-area">
                    <div class="chart-title">ğŸ“Š ê¸°ë³¸ ì°¨íŠ¸ íŒ¨í„´ - ì§€ì§€ì„ ê³¼ ì €í•­ì„ </div>
                    
                    <div class="pattern-selector">
                        <button class="pattern-btn active" onclick="showPattern('support')">ì§€ì§€ì„  íŒ¨í„´</button>
                        <button class="pattern-btn" onclick="showPattern('resistance')">ì €í•­ì„  íŒ¨í„´</button>
                        <button class="pattern-btn" onclick="showPattern('breakout')">ëŒíŒŒ íŒ¨í„´</button>
                        <button class="pattern-btn" onclick="showPattern('triangle')">ì‚¼ê°í˜• íŒ¨í„´</button>
                    </div>
                    
                    <div class="chart-canvas-area">
                        <canvas id="basicChart"></canvas>
                    </div>
                    
                    <div class="volume-area">
                        <canvas id="volumeChart"></canvas>
                    </div>
                </div>
                
                <div class="explanation" id="patternExplanation">
                    <h3>ğŸ” ì§€ì§€ì„  íŒ¨í„´ ë¶„ì„</h3>
                    <ul>
                        <li>ì§€ì§€ì„ : ì£¼ê°€ê°€ ì—¬ëŸ¬ ë²ˆ ë°˜ë“±í•œ ê°€ê²©ëŒ€ (ë§¤ìˆ˜ ê´€ì‹¬ êµ¬ê°„)</li>
                        <li>ì§€ì§€ì„  ê·¼ì²˜ì—ì„œ ê±°ë˜ëŸ‰ ì¦ê°€ì™€ í•¨ê»˜ ë°˜ë“±í•˜ë©´ ê°•í•œ ë§¤ìˆ˜ ì‹ í˜¸</li>
                        <li>ì§€ì§€ì„  ì´íƒˆ ì‹œì—ëŠ” ì¶”ê°€ í•˜ë½ ê°€ëŠ¥ì„±ì´ ë†’ìŒ</li>
                        <li>ì§€ì§€ì„ ì€ í•œë²ˆ ê¹¨ì§€ë©´ ì €í•­ì„ ìœ¼ë¡œ ì—­í• ì´ ë°”ë€œ</li>
                    </ul>
                </div>
            </div>

            <!-- ê³ ê¸‰ íŒ¨í„´ íƒ­ -->
            <div id="tab-advanced" class="tab-content" style="display: none;">
                <div class="chart-area">
                    <div class="chart-title">ğŸ¯ ê³ ê¸‰ íŒ¨í„´ - ë¨¸ë¦¬ì–´ê¹¨í˜•ê³¼ ì´ì¤‘ë°”ë‹¥</div>
                    
                    <div class="pattern-selector">
                        <button class="pattern-btn active" onclick="showAdvancedPattern('headShoulders')">ë¨¸ë¦¬ì–´ê¹¨í˜•</button>
                        <button class="pattern-btn" onclick="showAdvancedPattern('doubleBottom')">ì´ì¤‘ë°”ë‹¥</button>
                        <button class="pattern-btn" onclick="showAdvancedPattern('cup')">ì»µì•¤í•¸ë“¤</button>
                        <button class="pattern-btn" onclick="showAdvancedPattern('flag')">ê¹ƒë°œí˜•</button>
                    </div>
                    
                    <div class="chart-canvas-area">
                        <canvas id="advancedChart"></canvas>
                    </div>
                </div>
                
                <div class="explanation" id="advancedExplanation">
                    <h3>ğŸ¯ ë¨¸ë¦¬ì–´ê¹¨í˜• íŒ¨í„´</h3>
                    <ul>
                        <li>ìƒìŠ¹ ì¶”ì„¸ì˜ ë§ˆì§€ë§‰ì— ë‚˜íƒ€ë‚˜ëŠ” ë°˜ì „ ì‹ í˜¸</li>
                        <li>ì™¼ìª½ ì–´ê¹¨ â†’ ë¨¸ë¦¬ â†’ ì˜¤ë¥¸ìª½ ì–´ê¹¨ ìˆœìœ¼ë¡œ í˜•ì„±</li>
                        <li>ë„¥ë¼ì¸ ì´íƒˆ ì‹œ ê°•í•œ í•˜ë½ ì‹ í˜¸</li>
                        <li>ê±°ë˜ëŸ‰ì€ ë¨¸ë¦¬ ë¶€ë¶„ì—ì„œ ê°ì†Œí•˜ëŠ” ê²ƒì´ íŠ¹ì§•</li>
                    </ul>
                </div>
            </div>

            <!-- ì‹¤ì „ ì—°ìŠµ íƒ­ -->
            <div id="tab-practice" class="tab-content" style="display: none;">
                <div class="chart-area">
                    <div class="chart-title">ğŸ’ª ì‹¤ì „ ì—°ìŠµ - íŒ¨í„´ì„ ì°¾ì•„ë³´ì„¸ìš”!</div>
                    
                    <div style="text-align: center; margin-bottom: 20px;">
                        <button class="btn btn-primary" onclick="generateRandomChart()">
                            ğŸ² ìƒˆë¡œìš´ ì°¨íŠ¸ ìƒì„±
                        </button>
                        <button class="btn btn-secondary" onclick="revealAnswer()">
                            ğŸ’¡ ì •ë‹µ í™•ì¸
                        </button>
                    </div>
                    
                    <div class="chart-canvas-area">
                        <canvas id="practiceChart"></canvas>
                    </div>
                    
                    <div class="signal-indicator" id="practiceSignals" style="display: none;">
                        <div class="signal-item signal-buy" id="buySignal">ë§¤ìˆ˜ êµ¬ê°„</div>
                        <div class="signal-item signal-sell" id="sellSignal">ë§¤ë„ êµ¬ê°„</div>
                    </div>
                </div>
                
                <div class="explanation" id="practiceExplanation">
                    <h3>ğŸ’ª ì—°ìŠµ ë¬¸ì œ</h3>
                    <p>ìœ„ ì°¨íŠ¸ì—ì„œ ë§¤ìˆ˜ì™€ ë§¤ë„ íƒ€ì´ë°ì„ ì°¾ì•„ë³´ì„¸ìš”. ì´ë™í‰ê· ì„ , ê±°ë˜ëŸ‰, ì§€ì§€/ì €í•­ì„ ì„ ì¢…í•©ì ìœ¼ë¡œ ê³ ë ¤í•´ë³´ì„¸ìš”!</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../../common/js/chart-utils.js"></script>
    <script>
        // ìŠ¤í† ë¦¬ ë°ì´í„°
        const storyData = {
            failure: {
                labels: ['ë§¤ìˆ˜ ì‹œì ', '1ì£¼ í›„', '2ì£¼ í›„', 'ì†ì ˆë§¤'],
                price: [68000, 66500, 64000, 61500],
                volume: [15000000, 18000000, 22000000, 25000000],
                ma20: [69500, 69000, 68200, 67000],
                stories: [
                    "ê¹€ê³¼ì¥ë‹˜ì´ ì‚¼ì„±ì „ì ì¢‹ë‹¤ê³  í•´ì„œ 68,000ì›ì— ë§¤ìˆ˜. ì´ë™í‰ê· ì„ ì´ ë­”ì§€ë„ ëª°ëì–´ìš”.",
                    "ì–´? ì¢€ ë–¨ì–´ì¡Œë„¤... ê·¸ë˜ë„ ì‚¼ì„±ì „ìì¸ë° ê´œì°®ê² ì§€? ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.",
                    "ê³„ì† ë–¨ì–´ì§€ëŠ”ë°... ë‰´ìŠ¤ë¥¼ ì°¾ì•„ë´ë„ íŠ¹ë³„í•œ ì•…ì¬ëŠ” ì—†ì—ˆì–´ìš”.",
                    "ë” ì´ìƒ ëª» ê²¬ë””ê² ì–´ì„œ 61,500ì›ì— ì†ì ˆë§¤. 10ë§Œì› ì†ì‹¤ ğŸ˜­"
                ]
            },
            success: {
                labels: ['ê´€ë§', 'ì‹ í˜¸ í¬ì°©', 'ë§¤ìˆ˜', 'ìµì ˆ'],
                price: [62000, 63800, 65500, 69500],
                volume: [14000000, 16000000, 24000000, 32000000],
                ma20: [63500, 63200, 63800, 66100],
                stories: [
                    "ì´ë²ˆì—” ì´ë™í‰ê· ì„ ì„ í™•ì¸í•˜ê³  ì‹ ì¤‘í•˜ê²Œ ê´€ë§í–ˆì–´ìš”.",
                    "20ì¼ì„  ìœ„ë¡œ ì˜¬ë¼ì˜¤ê³  ê±°ë˜ëŸ‰ë„ ëŠ˜ì–´ë‚˜ë„¤! ì¢‹ì€ ì‹ í˜¸ì˜ˆìš”.",
                    "í™•ì‹ ì„ ê°€ì§€ê³  65,500ì›ì— ë§¤ìˆ˜! ì´ë²ˆì—” ê·¼ê±°ê°€ ìˆìŠµë‹ˆë‹¤.",
                    "ëª©í‘œê°€ ë„ë‹¬í•´ì„œ 69,500ì›ì— ìµì ˆ. 8ë§Œì› ìˆ˜ìµ! ğŸ‰"
                ]
            }
        };

        // íŒ¨í„´ ë°ì´í„°
        const patternData = {
            support: {
                price: [60000, 62000, 61000, 60500, 63000, 62500, 64000, 66000],
                lines: { support: 60000 },
                explanation: {
                    title: "ğŸ” ì§€ì§€ì„  íŒ¨í„´ ë¶„ì„",
                    points: [
                        "ì§€ì§€ì„ : ì£¼ê°€ê°€ ì—¬ëŸ¬ ë²ˆ ë°˜ë“±í•œ ê°€ê²©ëŒ€ (ë§¤ìˆ˜ ê´€ì‹¬ êµ¬ê°„)",
                        "ì§€ì§€ì„  ê·¼ì²˜ì—ì„œ ê±°ë˜ëŸ‰ ì¦ê°€ì™€ í•¨ê»˜ ë°˜ë“±í•˜ë©´ ê°•í•œ ë§¤ìˆ˜ ì‹ í˜¸",
                        "ì§€ì§€ì„  ì´íƒˆ ì‹œì—ëŠ” ì¶”ê°€ í•˜ë½ ê°€ëŠ¥ì„±ì´ ë†’ìŒ",
                        "ì§€ì§€ì„ ì€ í•œë²ˆ ê¹¨ì§€ë©´ ì €í•­ì„ ìœ¼ë¡œ ì—­í• ì´ ë°”ë€œ"
                    ]
                }
            },
            resistance: {
                price: [58000, 60000, 62000, 64000, 63500, 64200, 63800, 62000],
                lines: { resistance: 64000 },
                explanation: {
                    title: "ğŸ” ì €í•­ì„  íŒ¨í„´ ë¶„ì„", 
                    points: [
                        "ì €í•­ì„ : ì£¼ê°€ê°€ ì—¬ëŸ¬ ë²ˆ í•˜ë½í•œ ê°€ê²©ëŒ€ (ë§¤ë„ ê´€ì‹¬ êµ¬ê°„)",
                        "ì €í•­ì„  ê·¼ì²˜ì—ì„œëŠ” ë§¤ë„ ì••ë ¥ì´ ê°•í•´ì ¸ ìƒìŠ¹ì´ ì œí•œë¨",
                        "ì €í•­ì„  ëŒíŒŒ ì‹œ ëŒ€ëŸ‰ ê±°ë˜ëŸ‰ê³¼ í•¨ê»˜ë¼ë©´ ê°•í•œ ìƒìŠ¹ ì‹ í˜¸",
                        "ëŒíŒŒëœ ì €í•­ì„ ì€ ì´í›„ ì§€ì§€ì„  ì—­í• ì„ í•˜ê²Œ ë¨"
                    ]
                }
            },
            breakout: {
                price: [61000, 61500, 62000, 61800, 62200, 63500, 65000, 67000],
                lines: { resistance: 62500 },
                explanation: {
                    title: "ğŸš€ ëŒíŒŒ íŒ¨í„´ ë¶„ì„",
                    points: [
                        "ì €í•­ì„ ì„ í˜ìˆê²Œ ëŒíŒŒí•˜ë©´ì„œ ìƒìŠ¹í•˜ëŠ” íŒ¨í„´",
                        "ëŒíŒŒ ì‹œì ì— ê±°ë˜ëŸ‰ì´ í¬ê²Œ ì¦ê°€í•˜ëŠ” ê²ƒì´ í•µì‹¬",
                        "ëŒíŒŒ í›„ ë‹¤ì‹œ ì €í•­ì„ (í˜„ì¬ëŠ” ì§€ì§€ì„ ) ìœ„ì—ì„œ ì§€ì§€ë°›ìœ¼ë©´ í™•ì‹¤í•œ ì‹ í˜¸",
                        "ê°€ì§œ ëŒíŒŒë¥¼ ì£¼ì˜í•´ì•¼ í•¨ - ê±°ë˜ëŸ‰ ì—†ëŠ” ëŒíŒŒëŠ” ìœ„í—˜"
                    ]
                }
            },
            triangle: {
                price: [60000, 61000, 60500, 61200, 60800, 61100, 60900, 62500],
                lines: { support: [60000, 60900], resistance: [61000, 61100] },
                explanation: {
                    title: "ğŸ“ ì‚¼ê°í˜• íŒ¨í„´ ë¶„ì„",
                    points: [
                        "ìƒìŠ¹í•˜ëŠ” ì§€ì§€ì„ ê³¼ í•˜ë½í•˜ëŠ” ì €í•­ì„ ì´ ë§Œë‚˜ëŠ” íŒ¨í„´",
                        "ë³€ë™í­ì´ ì ì°¨ ì¤„ì–´ë“¤ë©´ì„œ ì‚¼ê°í˜• ëª¨ì–‘ì„ í˜•ì„±",
                        "ë ë¶€ë¶„ì—ì„œ ì–´ëŠ ë°©í–¥ìœ¼ë¡œë“  í¬ê²Œ ì›€ì§ì¼ ê°€ëŠ¥ì„± ë†’ìŒ",
                        "ëŒíŒŒ ë°©í–¥ê³¼ ê±°ë˜ëŸ‰ì„ í™•ì¸í•˜ì—¬ ë§¤ë§¤ ë°©í–¥ ê²°ì •"
                    ]
                }
            }
        };

        let currentCharts = {};
        let currentPattern = 'support';

        // ìŠ¤í† ë¦¬ ì°¨íŠ¸ ê·¸ë¦¬ê¸°
        function drawStoryChart() {
            const ctx = document.getElementById('storyChart').getContext('2d');
            if (currentCharts.story) currentCharts.story.destroy();

            currentCharts.story = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['ì‹œì‘', '1ì£¼ì°¨', '2ì£¼ì°¨', '3ì£¼ì°¨'],
                    datasets: [{
                        label: 'ğŸ˜­ ì‹¤íŒ¨í•œ íˆ¬ì',
                        data: storyData.failure.price,
                        borderColor: ChartUtils.colors.danger,
                        backgroundColor: ChartUtils.colors.danger + '20',
                        borderWidth: 3,
                        tension: 0.4,
                        pointBackgroundColor: ChartUtils.colors.danger,
                        pointBorderColor: '#fff',
                        pointBorderWidth: 3,
                        pointRadius: 8
                    }, {
                        label: 'ğŸ˜Š ì„±ê³µí•œ íˆ¬ì',
                        data: storyData.success.price,
                        borderColor: ChartUtils.colors.success,
                        backgroundColor: ChartUtils.colors.success + '20',
                        borderWidth: 3,
                        tension: 0.4,
                        pointBackgroundColor: ChartUtils.colors.success,
                        pointBorderColor: '#fff',
                        pointBorderWidth: 3,
                        pointRadius: 8
                    }]
                },
                options: {
                    ...ChartUtils.getResponsiveOptions(),
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return ChartUtils.formatKRW(value);
                                }
                            }
                        }
                    },
                    onHover: (event, elements) => {
                        if (elements.length > 0) {
                            const datasetIndex = elements[0].datasetIndex;
                            const index = elements[0].index;
                            const story = datasetIndex === 0 ? 
                                storyData.failure.stories[index] : 
                                storyData.success.stories[index];
                            
                            const boxClass = datasetIndex === 0 ? 'failure-box' : 'success-box';
                            document.getElementById('storyExplanation').className = `story-box ${boxClass}`;
                            document.getElementById('storyExplanation').innerHTML = `
                                <h4>ğŸ’­ ${datasetIndex === 0 ? 'ì‹¤íŒ¨' : 'ì„±ê³µ'} ì‹œì ì˜ ìƒê°</h4>
                                <p>${story}</p>
                            `;
                        }
                    }
                }
            });
        }

        // ê¸°ë³¸ íŒ¨í„´ ì°¨íŠ¸ ê·¸ë¦¬ê¸°
        function drawBasicChart() {
            const data = patternData[currentPattern];
            const ctx = document.getElementById('basicChart').getContext('2d');
            if (currentCharts.basic) currentCharts.basic.destroy();

            const datasets = [{
                label: 'ì£¼ê°€',
                data: data.price,
                borderColor: ChartUtils.colors.primary,
                backgroundColor: ChartUtils.colors.primary + '20',
                borderWidth: 3,
                tension: 0.4
            }];

            // ì§€ì§€ì„ /ì €í•­ì„  ì¶”ê°€
            if (data.lines.support) {
                datasets.push({
                    label: 'ì§€ì§€ì„ ',
                    data: new Array(data.price.length).fill(data.lines.support),
                    borderColor: ChartUtils.colors.success,
                    borderDash: [10, 5],
                    borderWidth: 2,
                    fill: false,
                    pointRadius: 0
                });
            }

            if (data.lines.resistance) {
                datasets.push({
                    label: 'ì €í•­ì„ ',
                    data: new Array(data.price.length).fill(data.lines.resistance),
                    borderColor: ChartUtils.colors.danger,
                    borderDash: [10, 5],
                    borderWidth: 2,
                    fill: false,
                    pointRadius: 0
                });
            }

            currentCharts.basic = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['1ì£¼', '2ì£¼', '3ì£¼', '4ì£¼', '5ì£¼', '6ì£¼', '7ì£¼', '8ì£¼'],
                    datasets: datasets
                },
                options: {
                    ...ChartUtils.getResponsiveOptions(),
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return ChartUtils.formatKRW(value);
                                }
                            }
                        }
                    }
                }
            });

            // ê±°ë˜ëŸ‰ ì°¨íŠ¸
            const volumeCtx = document.getElementById('volumeChart').getContext('2d');
            if (currentCharts.volume) currentCharts.volume.destroy();

            currentCharts.volume = new Chart(volumeCtx, {
                type: 'bar',
                data: {
                    labels: ['1ì£¼', '2ì£¼', '3ì£¼', '4ì£¼', '5ì£¼', '6ì£¼', '7ì£¼', '8ì£¼'],
                    datasets: [{
                        label: 'ê±°ë˜ëŸ‰',
                        data: [15000000, 18000000, 22000000, 16000000, 20000000, 35000000, 28000000, 32000000],
                        backgroundColor: ChartUtils.colors.secondary + '80',
                        borderColor: ChartUtils.colors.secondary,
                        borderWidth: 1
                    }]
                },
                options: {
                    ...ChartUtils.getResponsiveOptions(),
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return ChartUtils.formatVolume(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        // íŒ¨í„´ ì „í™˜
        function showPattern(patternName) {
            currentPattern = patternName;
            
            // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.pattern-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            drawBasicChart();
            
            // ì„¤ëª… ì—…ë°ì´íŠ¸
            const explanation = patternData[patternName].explanation;
            document.getElementById('patternExplanation').innerHTML = `
                <h3>${explanation.title}</h3>
                <ul>
                    ${explanation.points.map(point => `<li>${point}</li>`).join('')}
                </ul>
            `;
        }

        // íƒ­ ì „í™˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        window.addEventListener('tabChanged', function(e) {
            const tabName = e.detail;
            setTimeout(() => {
                if (tabName === 'story') drawStoryChart();
                if (tabName === 'basic') drawBasicChart();
                if (tabName === 'advanced') drawAdvancedChart();
                if (tabName === 'practice') drawPracticeChart();
            }, 100);
        });

        // ê³ ê¸‰ íŒ¨í„´ ì°¨íŠ¸ (ê°„ë‹¨ êµ¬í˜„)
        function drawAdvancedChart() {
            const ctx = document.getElementById('advancedChart').getContext('2d');
            if (currentCharts.advanced) currentCharts.advanced.destroy();

            currentCharts.advanced = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['1ì£¼', '2ì£¼', '3ì£¼', '4ì£¼', '5ì£¼', '6ì£¼', '7ì£¼', '8ì£¼', '9ì£¼'],
                    datasets: [{
                        label: 'ì£¼ê°€',
                        data: [60000, 65000, 62000, 68000, 61000, 66000, 59000, 57000, 55000],
                        borderColor: ChartUtils.colors.primary,
                        backgroundColor: ChartUtils.colors.primary + '20',
                        borderWidth: 3,
                        tension: 0.4
                    }]
                },
                options: ChartUtils.getResponsiveOptions()
            });
        }

        // ì‹¤ì „ ì—°ìŠµ ì°¨íŠ¸
        function drawPracticeChart() {
            generateRandomChart();
        }

        function generateRandomChart() {
            const data = ChartUtils.generateStockData(65000, 20);
            const ctx = document.getElementById('practiceChart').getContext('2d');
            if (currentCharts.practice) currentCharts.practice.destroy();

            currentCharts.practice = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => d.date),
                    datasets: [{
                        label: 'ì£¼ê°€',
                        data: data.map(d => d.price),
                        borderColor: ChartUtils.colors.primary,
                        backgroundColor: ChartUtils.colors.primary + '20',
                        borderWidth: 3,
                        tension: 0.4
                    }, {
                        label: '20ì¼ ì´í‰ì„ ',
                        data: ChartUtils.calculateMovingAverage(data, 20),
                        borderColor: ChartUtils.colors.warning,
                        borderDash: [5, 5],
                        borderWidth: 2,
                        fill: false
                    }]
                },
                options: ChartUtils.getResponsiveOptions()
            });

            // ì •ë‹µ ìˆ¨ê¸°ê¸°
            document.getElementById('practiceSignals').style.display = 'none';
        }

        function revealAnswer() {
            document.getElementById('practiceSignals').style.display = 'flex';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²« ë²ˆì§¸ ì°¨íŠ¸ ê·¸ë¦¬ê¸°
        window.addEventListener('load', function() {
            drawStoryChart();
        });
    </script>
</body>
</html>